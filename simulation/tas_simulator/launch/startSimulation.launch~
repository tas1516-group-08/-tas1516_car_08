<?xml version="1.0"?>
<launch>
	<master auto="start"/>
	<param name="/use_sim_time" value="true"/>
	<arg name="use_joy" default="false"/>

	<!-- contribution of Christopher Zeiser-->
	<!-- 7 predefined starting position for starting the car simullation. roslaunch tas_simulator startSimulation.launch pos"xx":=1-->
	<arg name="pos1" default="false"/>
	<arg name="pos2" default="false"/>
	<arg name="pos3" default="false"/>
	<arg name="pos4" default="false"/>
	<arg name="pos5" default="false"/>
	<arg name="pos6" default="false"/>
	<arg name="pos7" default="false"/>
	<!-- contribution of Christopher Zeiser-->
    
	<!-- floor 
	<include file="$(find tas_simulator)/launch/spawnFloor.launch"/>-->
	<!-- car -->
	<group >
		<include file="$(find ackermann_vehicle_gazebo)/launch/ackermann_vehicle.launch">
			<arg name="world_name" value="$(find tas_simulator)/worlds/3rdFloor.world"/>
		
			<!-- contribution of Christopher Zeiser-->
        	<!-- Starting without parameter results in driving starting position-->
			<!-- in front of left parking slot -->
			<arg name="y" value="-0.50" if="$(arg pos1)"/>
			<arg name="x" value="-5.65" if="$(arg pos1)"/>
			<arg name="yaw" value="-1.55" if="$(arg pos1)"/>
			<!-- in front of right parking slot -->
		    <arg name="y" value="-4.2" if="$(arg pos2)"/>
		    <arg name="x" value="-6.65" if="$(arg pos2)"/>
		    <arg name="yaw" value="-1.55" if="$(arg pos2)"/> 
			<!-- in left parking slot -->
		    <arg name="y" value="-1.85" if="$(arg pos3)"/>
		    <arg name="x" value="-5.25" if="$(arg pos3)"/>
		    <arg name="yaw" value="-1.55" if="$(arg pos3)"/> 
			<!-- in right parking slot -->
		    <arg name="y" value="-5.55" if="$(arg pos4)"/>
		    <arg name="x" value="-7.05" if="$(arg pos4)"/>
		    <arg name="yaw" value="-1.55" if="$(arg pos4)"/> 
			<!-- slalom starting position -->
		    <arg name="y" value="0.0" if="$(arg pos5)"/>
		    <arg name="x" value="6.5" if="$(arg pos5)"/>
		    <arg name="yaw" value="-1.57075" if="$(arg pos5)"/>			
			<!-- slalom middle position 1-->
		    <arg name="y" value="-3.0" if="$(arg pos6)"/>
		    <arg name="x" value="6.5" if="$(arg pos6)"/>
		    <arg name="yaw" value="-2.356125" if="$(arg pos6)"/>
			<!-- slalom middle position 2-->
		    <arg name="y" value="-5.0" if="$(arg pos7)"/>
		    <arg name="x" value="6.5" if="$(arg pos7)"/>
		    <arg name="yaw" value="-2.356125" if="$(arg pos7)"/>
			<!-- contribution of Christopher Zeiser-->


		</include>
		<remap from="/ackermann_vehicle/imu" to="/imu"/>
		<remap from="/ackermann_vehicle/hokuyo_front" to="/scan"/>
	</group>
	<!-- joystick -->
	<group if="$(arg use_joy)">
		<include file="$(find tas_simulator)/launch/joystick.launch"/>
	</group>
	<!-- cmd_vel ackermann_msg conversion -->
	<include file="$(find cmd_vel_ackermann_bridge)/launch/cmd_vel_ackermann_bridge.launch"/>		
	<!--rviz -->
	<node name="rviz" pkg="rviz" type="rviz" args="-d $(find tas_simulator)/launch/rviz.rviz" />

	<!--parking_node Change-->
	<node name="parking_node" pkg="tas_autonomous_control" type="parking_node" output="screen"/>


</launch>
